{% extends "base.html" %}
{% block title %}{{ g.t['title'] if g.t is defined else 'Floorball Stats Tracker' }}{% endblock %}
{% block content %}
<div class="container mt-5">
    <div class="d-flex flex-wrap gap-2 align-items-center mb-4">
        {% if games %}
        <form method="get" action="/" class="d-inline-block">
            <select class="form-select form-select-sm d-inline-block w-auto" name="team" onchange="this.form.submit()">
                <option value="">{{ g.t['all_teams'] if g.t is defined else 'All Teams' }}</option>
                {% set teams = games | map(attribute='team') | list | unique | sort %}
                {% for team in teams %}
                <option value="{{ team }}" {% if team==selected_team %}selected{% endif %}>{{ team }}</option>
                {% endfor %}
            </select>
        </form>
        {% endif %}
        {% if latest_game_id is not none %}
        <a href="/game/{{ latest_game_id }}" class="btn btn-success btn-sm">{{ g.t['go_to_latest_game'] if g.t is
            defined else 'Go to Latest Game' }}</a>
        {% endif %}
    </div>
    <h1 class="mb-3" style="font-size:1.2rem;">{{ g.t['title'] if g.t is defined else 'Floorball Stats Tracker' }}</h1>
    {% if games %}
    <h2 class="mb-3">{{ g.t['all_games'] if not selected_team else g.t['all_games_for'] ~ ' ' ~ selected_team }}</h2>
    <ul class="list-group">
        {% for game in games %}
        {% if not selected_team or game.team == selected_team %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>
                {% if not selected_team and game.team %}
                <span class="badge bg-info text-dark me-2">{{ game.team }}</span>
                {% endif %}
                <span class="text-muted small">{{ game.date if game.date else '' }}</span>
                {{ game.home_team }} vs {{ game.away_team }}
            </span>
            <a href="/game/{{ game.id }}" class="btn btn-outline-secondary btn-sm">{{ g.t['view'] }}</a>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
    {% else %}
    <p>{{ g.t['no_games'] }}</p>
    {% endif %}
</div>
{% endblock %}